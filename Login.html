<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CineLogin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="cat-gif">
    <img src="https://media1.tenor.com/m/RiZpodi6JD0AAAAd/fast-cat-cat-excited.gif" alt="Gatos divertidos">
</div>

<div class="login-container">
    <h1>CineLogin</h1>
    <p>Inicia sesiÃ³n y descubre tus pelÃ­culas favoritas</p>

    <form id="loginForm">
        <div class="input-group">
            <label for="usuario">Usuario</label>
            <input type="text" id="usuario" placeholder="usuario" required>
        </div>

        <div class="input-group">
            <label for="password">ContraseÃ±a</label>
            <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
        </div>

        <button type="submit" class="login-btn">Entrar</button>
    </form>

    <div class="extra-links">
        <p><a href="">User: Andres Password: 123 </a></p>
    </div>
</div>

<script>
    // Inicializar cuenta por defecto si no hay cuentas registradas
    let usuariosRegistrados = JSON.parse(sessionStorage.getItem("usuariosRegistrados")) || [];

    // Verificar si ya existe la cuenta de Andres
    const existeAndres = usuariosRegistrados.some(u => u.usuario === "Andres");
    if(!existeAndres){
        usuariosRegistrados.push({usuario: "Andres", password: "123"});
        sessionStorage.setItem("usuariosRegistrados", JSON.stringify(usuariosRegistrados));
    }

    const form = document.getElementById('loginForm');

    form.addEventListener('submit', function(event) {
        event.preventDefault();

        const username = document.getElementById('usuario').value.trim();
        const password = document.getElementById('password').value.trim();

        // Obtener cuentas registradas actualizadas
        const usuariosRegistrados = JSON.parse(sessionStorage.getItem("usuariosRegistrados")) || [];

        if(usuariosRegistrados.length === 0){
            alert("No hay ninguna cuenta registrada. Crea una cuenta primero ðŸ˜¿");
            window.location.href = "CrearCuenta.html";
            return;
        }

        // Buscar coincidencia
        const cuentaValida = usuariosRegistrados.find(u => u.usuario === username && u.password === password);

        if(cuentaValida){
            alert(`Â¡Bienvenido a CineLogin, ${username}! ðŸŽ¬ðŸ˜º`);
            sessionStorage.setItem('usuario', username); // usuario activo
            window.location.href = "principal.html";
        } else {
            alert("Usuario o contraseÃ±a incorrectos. Intenta nuevamente ðŸ˜¿");
        }
    });
</script>

</body>
</html>
